{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 6,
  "lineage": "cf697d52-138e-36ec-f962-d633dbb9a0f7",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "aws_iam_group",
      "name": "mfa_enforced_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::852509885434:group/MFAEnforcedGroup",
            "id": "MFAEnforcedGroup",
            "name": "MFAEnforcedGroup",
            "path": "/",
            "unique_id": "AGPA4M7MMQP5AOLBX3VFB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_group_policy_attachment",
      "name": "attach_mfa_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "group": "MFAEnforcedGroup",
            "id": "MFAEnforcedGroup-20250421023119611800000001",
            "policy_arn": "arn:aws:iam::852509885434:policy/EnforceMFA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_group.mfa_enforced_group",
            "aws_iam_policy.enforce_mfa_policy"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "enforce_mfa_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::852509885434:policy/EnforceMFA",
            "attachment_count": 0,
            "description": "Policy to enforce MFA",
            "id": "arn:aws:iam::852509885434:policy/EnforceMFA",
            "name": "EnforceMFA",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"iam:GetAccountPasswordPolicy\",\"iam:ListVirtualMFADevices\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowViewAccountInfo\"},{\"Action\":[\"iam:ChangePassword\",\"iam:GetUser\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnPasswords\"},{\"Action\":[\"iam:CreateAccessKey\",\"iam:DeleteAccessKey\",\"iam:ListAccessKeys\",\"iam:UpdateAccessKey\",\"iam:GetAccessKeyLastUsed\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnAccessKeys\"},{\"Action\":[\"iam:DeleteSigningCertificate\",\"iam:ListSigningCertificates\",\"iam:UpdateSigningCertificate\",\"iam:UploadSigningCertificate\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnSigningCertificates\"},{\"Action\":[\"iam:DeleteSSHPublicKey\",\"iam:GetSSHPublicKey\",\"iam:ListSSHPublicKeys\",\"iam:UpdateSSHPublicKey\",\"iam:UploadSSHPublicKey\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnSSHPublicKeys\"},{\"Action\":[\"iam:CreateServiceSpecificCredential\",\"iam:DeleteServiceSpecificCredential\",\"iam:ListServiceSpecificCredentials\",\"iam:ResetServiceSpecificCredential\",\"iam:UpdateServiceSpecificCredential\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnGitCredentials\"},{\"Action\":[\"iam:CreateVirtualMFADevice\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:mfa/*\",\"Sid\":\"AllowManageOwnVirtualMFADevice\"},{\"Action\":[\"iam:DeactivateMFADevice\",\"iam:EnableMFADevice\",\"iam:ListMFADevices\",\"iam:ResyncMFADevice\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnUserMFA\"},{\"Condition\":{\"BoolIfExists\":{\"aws:MultiFactorAuthPresent\":\"false\"}},\"Effect\":\"Deny\",\"NotAction\":[\"iam:CreateVirtualMFADevice\",\"iam:EnableMFADevice\",\"iam:GetUser\",\"iam:GetMFADevice\",\"iam:ListMFADevices\",\"iam:ListVirtualMFADevices\",\"iam:ResyncMFADevice\",\"sts:GetSessionToken\"],\"Resource\":\"*\",\"Sid\":\"DenyAllExceptListedIfNoMFA\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4M7MMQP5PMWZCSIFI",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "test_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::my-unique-bucket-ba8bd0b0",
            "bucket": "my-unique-bucket-ba8bd0b0",
            "bucket_domain_name": "my-unique-bucket-ba8bd0b0.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "my-unique-bucket-ba8bd0b0.s3.us-east-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "cf592142f8d2751a584f428e6a5620a967b7c893e52607d4641fbf51e2e1d81a",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "my-unique-bucket-ba8bd0b0",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_id.bucket_id"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_id",
      "name": "bucket_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "b64_std": "uovQsA==",
            "b64_url": "uovQsA",
            "byte_length": 4,
            "dec": "3129725104",
            "hex": "ba8bd0b0",
            "id": "uovQsA",
            "keepers": null,
            "prefix": null
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
